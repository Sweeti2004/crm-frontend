{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Row,Col,Container,Form,Button,Spinner,Alert}from'react-bootstrap';import{loginPending,loginSuccess,loginFail}from\"./loginSlice\";import{useDispatch,useSelector}from'react-redux';import{userLogin}from\"../../api/userApi\";import{useNavigate}from'react-router-dom';import{getUserProfile}from'../../page/dashboard/userAction';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{formSwitcher}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const dispatch=useDispatch();const navigate=useNavigate();const{isLoading,isAuth,error}=useSelector(state=>state.login);useEffect(()=>{sessionStorage.getItem('accessJWT')&&navigate(\"/dashboard\");},[navigate,isAuth]);const handleOnchange=e=>{const{name,value}=e.target;switch(name){case'email':setEmail(value);break;case'password':setPassword(value);break;default:break;}};const handleOnSubmit=async e=>{e.preventDefault();if(!email||!password){return alert(\"fill up all form\");}dispatch(loginPending());//ToDo call api to submit the form\ntry{const isAuth=await userLogin({email,password});if(isAuth.status==='error'){return dispatch(loginFail(isAuth.message));}dispatch(loginSuccess());dispatch(getUserProfile());navigate(\"/dashboard\");console.log(isAuth);}catch(error){dispatch(loginFail(error.message));}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-info text-center\",children:\"Client Login \"}),/*#__PURE__*/_jsx(\"hr\",{}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",onSubmit:handleOnSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",value:email,onChange:handleOnchange,placeholder:\"Enter Email\",required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",value:password,onChange:handleOnchange,placeholder:\"Enter Password\",required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Login\"}),isLoading&&/*#__PURE__*/_jsx(Spinner,{variant:\"primary\",animation:\"border\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/password-reset\",className:\"btn btn-outline-info btn-sm rounded-pill px-4 shadow-sm\",children:\"Forgot Password?\"})})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Row","Col","Container","Form","Button","Spinner","Alert","loginPending","loginSuccess","loginFail","useDispatch","useSelector","userLogin","useNavigate","getUserProfile","jsx","_jsx","jsxs","_jsxs","Login","_ref","formSwitcher","email","setEmail","password","setPassword","dispatch","navigate","isLoading","isAuth","error","state","login","sessionStorage","getItem","handleOnchange","e","name","value","target","handleOnSubmit","preventDefault","alert","status","message","console","log","children","className","variant","autoComplete","onSubmit","Group","Label","Control","type","onChange","placeholder","required","animation","href"],"sources":["C:/Users/hp/OneDrive/Documents/Desktop/CRM/crm-frontend/frontend/src/components/login/login.comp.js"],"sourcesContent":["import React, {useState,useEffect} from 'react';\r\nimport { Row,Col ,Container,Form , Button,Spinner,Alert} from 'react-bootstrap'\r\nimport {loginPending, loginSuccess, loginFail} from \"./loginSlice\"\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {userLogin} from \"../../api/userApi\"\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getUserProfile } from '../../page/dashboard/userAction';\r\nconst Login = ({formSwitcher}) => {\r\n  const [email,setEmail]=useState('')\r\n  const [password,setPassword]=useState('')\r\n  const dispatch=useDispatch()\r\n const navigate = useNavigate(); \r\n  const {isLoading,isAuth,error}=useSelector(state=>state.login)\r\n\r\n  useEffect(()=>{\r\n   (sessionStorage.getItem('accessJWT')) &&  navigate(\"/dashboard\")\r\n  },[navigate,isAuth])\r\n  const handleOnchange = e =>{\r\n    const {name,value}=e.target\r\n    switch(name){\r\n      case 'email':\r\n        setEmail(value)\r\n        break\r\n      case 'password':\r\n        setPassword(value)\r\n        break\r\n        default:\r\n          break\r\n\r\n    }\r\n    \r\n  };\r\n  const handleOnSubmit= async (e)=>{\r\n    e.preventDefault()\r\n    if(!email || !password){\r\n       return alert(\"fill up all form\")\r\n    }\r\n    dispatch(loginPending())\r\n    //ToDo call api to submit the form\r\n    try {\r\n\t\t\tconst isAuth = await userLogin({ email, password });\r\n      if(isAuth.status==='error'){\r\n       return dispatch(loginFail(isAuth.message))\r\n      }\r\n\t\t\t\r\n\r\n\t\t\tdispatch(loginSuccess());\r\n\t\t\tdispatch(getUserProfile());\r\n\t\t navigate(\"/dashboard\");\r\n      console.log(isAuth)\r\n\t\t} catch (error) {\r\n\t\t\tdispatch(loginFail(error.message));\r\n\t\t}\r\n  }\r\n  return (\r\n\r\n    <Container>\r\n      <Row>\r\n        <Col>\r\n            <h1 className='text-info text-center'>Client Login </h1>\r\n            \r\n            <hr/>\r\n            {error && <Alert variant='danger'>{error}</Alert>}\r\n            <Form autoComplete='off' onSubmit={handleOnSubmit}>\r\n                <Form.Group>\r\n                    <Form.Label>Email Address</Form.Label>\r\n                    <Form.Control type=\"email\" name=\"email\" value={email} onChange={handleOnchange} placeholder=\"Enter Email\" required />\r\n                </Form.Group>\r\n                <Form.Group>\r\n                    <Form.Label>Password</Form.Label>\r\n                    <Form.Control type=\"password\" name=\"password\" value={password} onChange={handleOnchange} placeholder=\"Enter Password\" required />\r\n                </Form.Group>\r\n                <Button type=\"submit\">Login</Button>\r\n                {isLoading && <Spinner variant='primary' animation='border'/>}\r\n            </Form>\r\n            <hr/>\r\n        </Col>\r\n      </Row>\r\n      <div className=\"text-center mt-3\">\r\n  <a href=\"/password-reset\"  className=\"btn btn-outline-info btn-sm rounded-pill px-4 shadow-sm\">\r\n Forgot Password?\r\n  </a>\r\n</div>\r\n\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Login\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}