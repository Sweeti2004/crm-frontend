{"ast":null,"code":"import React from\"react\";import{useEffect,useState}from\"react\";import{Form,Container,Row,Col,Button,Spinner,Alert}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{shortText}from\"../../utils/validation\";import{openNewTicket}from\"./addTicketAction\";import{restSuccessMSg}from\"./addTicketSlicer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialFrmDt={subject:\"\",issueDate:\"\",message:\"\"};const initialFrmError={subject:false,issueDate:false,message:false};export const AddTicketForm=()=>{const dispatch=useDispatch();const{user:{name}}=useSelector(state=>state.user);const{isLoading,error,successMsg}=useSelector(state=>state.openTicket);const[frmData,setFrmData]=useState(initialFrmDt);const[frmDataErro,setFrmDataErro]=useState(initialFrmError);useEffect(()=>{return()=>{successMsg&&dispatch(restSuccessMSg());};},[dispatch,frmData,frmDataErro]);const handleOnChange=e=>{const{name,value}=e.target;setFrmData({...frmData,[name]:value});};const handleOnSubmit=async e=>{e.preventDefault();setFrmDataErro(initialFrmError);const isSubjectValid=await shortText(frmData.subject);setFrmDataErro({...initialFrmError,subject:!isSubjectValid});dispatch(openNewTicket({...frmData,sender:name}));};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"p-5 mb-4 bg-light rounded-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-info text-center\",children:\"Add New Ticket\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),successMsg&&/*#__PURE__*/_jsx(Alert,{variant:\"primary\",children:successMsg}),isLoading&&/*#__PURE__*/_jsx(Spinner,{variant:\"primary\",animation:\"border\"})]}),/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",onSubmit:handleOnSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,children:\"Subject\"}),/*#__PURE__*/_jsxs(Col,{sm:9,children:[/*#__PURE__*/_jsx(Form.Control,{name:\"subject\",onChange:handleOnChange,value:frmData.subject,placeholder:\"Subject\",required:true}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-danger\",children:frmDataErro.subject&&\"subject length must be more than three!\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,children:\"Issue Found\"}),/*#__PURE__*/_jsx(Col,{sm:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"date\",name:\"issueDate\",onChange:handleOnChange,value:frmData.issueDate,required:true})})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",name:\"message\",rows:\"5\",value:frmData.message,onChange:handleOnChange,required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"info\",className:\"w-100\",children:\"Create Ticket\"})]})]});};export default AddTicketForm;","map":{"version":3,"names":["React","useEffect","useState","Form","Container","Row","Col","Button","Spinner","Alert","useDispatch","useSelector","shortText","openNewTicket","restSuccessMSg","jsx","_jsx","jsxs","_jsxs","initialFrmDt","subject","issueDate","message","initialFrmError","AddTicketForm","dispatch","user","name","state","isLoading","error","successMsg","openTicket","frmData","setFrmData","frmDataErro","setFrmDataErro","handleOnChange","e","value","target","handleOnSubmit","preventDefault","isSubjectValid","sender","fluid","className","children","variant","animation","autoComplete","onSubmit","Group","as","Label","column","sm","Control","onChange","placeholder","required","Text","type","rows"],"sources":["C:/Users/hp/OneDrive/Documents/Desktop/CRM/crm-frontend/frontend/src/components/add-ticket-form/AddTicketForm.comp.js"],"sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from \"react\"\r\nimport {\r\n  Form,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,Spinner,Alert\r\n} from \"react-bootstrap\";\r\nimport  { useDispatch,useSelector } from \"react-redux\"\r\nimport { shortText } from \"../../utils/validation\";\r\nimport { openNewTicket } from \"./addTicketAction\";\r\nimport { restSuccessMSg } from \"./addTicketSlicer\";\r\nconst initialFrmDt={\r\n  subject:\"\",\r\n  issueDate: \"\",\r\n  message:\"\",\r\n};\r\nconst initialFrmError={\r\n  subject:false,\r\n  issueDate: false,\r\n  message:false,\r\n};\r\nexport const AddTicketForm = () => {\r\n  const dispatch=useDispatch()\r\n  const {user:{name}}=useSelector(state=> state.user)\r\n  const {isLoading,error,successMsg}=useSelector(state=> state.openTicket)\r\n  const [frmData, setFrmData] = useState(initialFrmDt);\r\n  const [frmDataErro, setFrmDataErro] = useState(initialFrmError);\r\n\r\n  useEffect((\r\n    \r\n  ) => {return ()=>{\r\n    successMsg && dispatch(restSuccessMSg())\r\n    } }, [dispatch,frmData, frmDataErro])\r\n  const handleOnChange = e => {\r\n    const { name, value } = e.target\r\n\r\n    setFrmData({\r\n      ...frmData,\r\n      [name]: value\r\n    })\r\n\r\n  }\r\n  const handleOnSubmit = async e => {\r\n    e.preventDefault();\r\n    setFrmDataErro(initialFrmError)\r\n\r\n    const isSubjectValid = await shortText(frmData.subject)\r\n    setFrmDataErro({\r\n      ...initialFrmError,\r\n      subject: !isSubjectValid,\r\n    })\r\n    dispatch(openNewTicket({...frmData,sender:name}))\r\n  }\r\n  return (\r\n    <Container fluid className=\"p-5 mb-4 bg-light rounded-3\">\r\n      <h1 className=\"text-info text-center\">Add New Ticket</h1>\r\n      <hr />\r\n      <div>\r\n        {error && <Alert variant=\"danger\">{error}</Alert>}\r\n        {successMsg && <Alert variant=\"primary\">{successMsg}</Alert>}\r\n        {isLoading && <Spinner variant=\"primary\" animation=\"border\"/>}\r\n      </div>\r\n      <Form autoComplete=\"off\" onSubmit={handleOnSubmit}>\r\n        <Form.Group as={Row} className=\"mb-3\">\r\n          <Form.Label column sm={3}>\r\n            Subject\r\n          </Form.Label>\r\n          <Col sm={9}>\r\n            <Form.Control\r\n              name=\"subject\"\r\n              onChange={handleOnChange}\r\n              value={frmData.subject}\r\n              placeholder=\"Subject\"\r\n              required\r\n            />\r\n            <Form.Text className=\"text-danger\">\r\n              {frmDataErro.subject && \"subject length must be more than three!\"}\r\n            </Form.Text>\r\n          </Col>\r\n        </Form.Group>\r\n\r\n        <Form.Group as={Row} className=\"mb-3\">\r\n          <Form.Label column sm={3}>\r\n            Issue Found\r\n          </Form.Label>\r\n          <Col sm={9}>\r\n            <Form.Control\r\n              type=\"date\"\r\n              name=\"issueDate\"\r\n              onChange={handleOnChange}\r\n              value={frmData.issueDate}\r\n              required\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Description</Form.Label>\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            name=\"message\"\r\n            rows=\"5\"\r\n            value={frmData.message}\r\n            onChange={handleOnChange}\r\n            required\r\n          />\r\n        </Form.Group>\r\n\r\n        <Button type=\"submit\" variant=\"info\" className=\"w-100\">\r\n          Create Ticket\r\n        </Button>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AddTicketForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}